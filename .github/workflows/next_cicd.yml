name : Next JS Public Repo Deploy To the EC2 Via CI-Cd and Github Actions
on : [push]

jobs:
  Testing:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout The Code
        uses: actions/checkout@v2

      - name: Deploy via SSH
        uses: appleboy/ssh-action@v1
        with:
          host: ${{secrets.EC2_HOST}}
          username: ${{secrets.EC2_USER}}
          key: ${{secrets.EC2_SECRET_KEY}}
          script: |
           cd ${{secrets.APP_DIR}}
           git pull
           npm --version
           npm install
           npm run build
           pm2 restart "test_next"
           echo "Deployment SuccessFull ðŸŽ‰ðŸŽ‰"
